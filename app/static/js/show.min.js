// Show.js
// Generated by Fminmaker.py, version 1.01 beta © Rosan Finance
// Date: 2019-11-23 11:00
default_submit_mode=2;default_action='810';default_log_action='811';var $image=null;function log_callback(current_action,data,props){}function showActiveTab(ob){var oid=ob.attr("id");function get_id(id){return id?id.split(':')[1]:'';}var id=get_id(oid);var parent=$("#calculator-tabs");var selected_tab=$("li[class~='selected']",parent);var tab=$("a",selected_tab);var sid=get_id(tab.attr('id'));selected_tab.removeClass('selected');ob.parent().addClass('selected');$("#box_"+sid).addClass('hidden');$("#box_"+id).removeClass('hidden');}IsTrace=0;function $Init(){$onCalculatorSubmit(null);$DraggableImage.init({ 'width_padding':20,'height_padding':20});$PageScroller.reset(true);}function $onRefresh(x){var data=x['data'];var controls=x['controls'];var errors=x['errors'];$("#price").html(data['price']);$("#tax").html(data['tax']);$("#charge").html(data['charge']);$("#euro").html(data['euro']);$("#usd").html(data['usd']);$("#rub").html(data['rub']);function set_enabled_option(id,container){var index=0;var is_selected=false;$("option",container).each(function(){var ob=$(this);var disabled=ob.is(':disabled');if(is_selected)return;else if(disabled){ob.prop("selected",false);index+=1;}else{ob.prop("selected",true);is_selected=true;}});container.prop("selectedIndex",index);}for(i=0;i<controls.length;i++){var id=controls[i][0];var state=controls[i][1];var is_disabled=state==1?true:false;var is_check=state==-1?true:false;var ob=$("#"+id);var tag=ob.prop("tagName");var selected=ob.prop("selected");var selected_index=ob.prop("selectedIndex");if(is_disabled&&selected)ob.prop("selected",false);else if(is_check)set_enabled_option(id,ob);if(is_check)continue;ob.prop("disabled",is_disabled);var parent=ob.parent();if(parent.hasClass("value")){var input=$("input",parent);if(is_disabled){parent.addClass("disabled").removeClass("checked");input.addClass("disabled").prop("checked",false);}else{parent.removeClass("disabled");input.removeClass("disabled");}}}$("#sign").prop("src",root+'static/img/sign-on.png')}function $onLocalExportClick(){$("#command").val('export');$onParentFormSubmit('calculator');}var checked_item=new Object();function $onCalculatorSubmit(ob){var params=new Object();var action=default_action;if(!is_null(ob)){var id=ob.attr('id');var name=ob.attr('name');var parent=ob.parent();var is_radio=ob.prop('type')=='radio'?true:false;if(is_radio&&!is_null(checked_item[name]))checked_item[name].removeClass('checked');if((ob.val()>'0'&&ob.prop('type')=='number')||ob.prop('checked')?true:false){parent.addClass('checked');if(is_radio)checked_item[name]=parent;}else{parent.removeClass('checked');if(is_radio)checked_item[name]=null;}}var items='';$("*[id^='item_']").each(function(index){var item=$(this);var name=item.attr('name');var value=item.val();var is_check=['checkbox','radio'].indexOf(item.prop('type'))>-1?true:false;var is_disabled=item.prop("disabled")?true:false;if(((!is_check&&int(value)>0)||item.prop('checked'))&&!is_disabled){if(items)items+='|';items+=name+':'+value;}});var options='';$("input[id^='option_']").each(function(index){var option=$(this);var name=option.attr('name');var value=option.val();var is_check=['checkbox','radio'].indexOf(option.prop('type'))>-1?true:false;if((!is_check&&int(value)>0)||option.prop('checked')){if(options)options+='|';options+=name+':'+value;}});$("#sign").prop("src",root+'static/img/sign-off.png');params['bound']=$("#bound").val();params['items']=items;params['options']=options;$web_logging(action,function(x){$onRefresh(x);},params);}jQuery(function($){$("input","#calculator").on('change',function(e){var ob=$(this);var value=ob.val();var is_check=['checkbox','radio'].indexOf(ob.prop('type'))>-1?true:false;if(!is_check){if(value!=ob.attr("value"))ob.attr("value",value);}$onCalculatorSubmit(ob);});$("div.value","#calculator").on('click',function(e){var tag=e.target.tagName;var ob=$("input",tag=='SPAN'?$(this).parent():(tag=='INPUT'?e.target:$(this)));var is_checked=ob.prop("checked")?true:false;var is_blocked=ob.hasClass("blocked")?true:false;if(is_null(ob)||tag=='SELECT'||is_blocked)return;ob.prop("checked",is_checked?false:true);$onCalculatorSubmit(ob);});$("select").on('change',function(e){$onCalculatorSubmit($(this));});$("#loc_export").click(function(e){$onLocalExportClick();e.preventDefault();});$("a.common-tab",this).click(function(e){showActiveTab($(this));$PageScroller.reset(false);e.preventDefault();return false;});$("img.screenshot").on("mouseleave",function(e){$DraggableImage.onLeave(e);}).on("mouseenter",function(e){var ob=$(this);var id='image_'+(ob.attr('id').split('_')[1]||'0');$DraggableImage.onEnter(ob,id,e);});$("img.screenshot").on("mousemove",function(e){$DraggableImage.onMove(e);e.preventDefault();return false;});$(window).on("resize",function(){$PageScroller.reset(false);});$(window).scroll(function(e){ $PageScroller.checkPosition(0);});$(window).keydown(function(e){if($ConfirmDialog.is_focused()||$NotificationDialog.is_focused())return;if(is_show_error)return;if(e.keyCode==13){}if(is_search_focused)return;var exit=false;if(exit){e.preventDefault();return false;}});});function page_is_focused(e){return false;}function resize(){}$(function(){if(IsTrace)alert('Document Ready(calculator)');current_context='calculator';resize();try{$_init();}catch(e) {}});
